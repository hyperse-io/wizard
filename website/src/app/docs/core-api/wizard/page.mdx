---
title: wizard
description: Create a wizard instance
icon: StarsIcon
---

import { generateDefinition, TSDoc } from 'nextra/tsdoc';

## Create Wizard

createWizard is the main function to create a wizard instance.

```ts twoslash
// @filename: @hyperse/wizard/dist/index.d.ts
import { createWizard, WizardOptions } from '@hyperse/wizard';

const wizard = createWizard({
  name: 'hps_cli',
  description: 'cli.hpsCli.description',
  version: 'cli.hpsCli.version',
});
```

### WizardOptions

<TSDoc
  definition={generateDefinition({
    code: `
export { WizardOptions as default } from '@hyperse/wizard'`,
  })}
/>

## Public API - WizardWithUse

**Important**: The `createWizard` function returns a `WizardWithUse` instance, not a full `Wizard` instance. This means external users can only access the three core methods: `use`, `on`, and `parse`.

### Core Methods

The `WizardWithUse` type exposes only the essential public interface:

#### `use(plugin)` - Plugin Registration

Registers a plugin with the wizard instance. This is the primary way to extend functionality.

```ts twoslash
import { createWizard } from '@hyperse/wizard';

const wizard = createWizard({ name: 'my-cli' });
wizard.use(myPlugin); // ✅ Available
```

#### `on(event, listener)` - Event Listening

Registers event listeners for various wizard lifecycle events.

```ts twoslash
import { createWizard } from '@hyperse/wizard';

const wizard = createWizard({ name: 'my-cli' });
wizard.on('build', () => console.log('Building...')); // ✅ Available
```

#### `parse(options?)` - Command Execution

Parses command line arguments and executes the appropriate command.

```ts twoslash
import { createWizard } from '@hyperse/wizard';

const wizard = createWizard({ name: 'my-cli' });
wizard.parse(); // ✅ Available
```

### Type Safety

The `WizardWithUse` type ensures type safety by:

1. **Restricting Access**: Only the three core methods are accessible from outside
2. **Plugin Integration**: The `use` method properly types plugin integrations
3. **Event Handling**: The `on` method provides type-safe event handling
4. **Method Chaining**: All methods return `WizardWithUse` for fluent chaining

```ts twoslash
import { createWizard } from '@hyperse/wizard';

const wizard = createWizard({ name: 'my-cli' });

// ✅ Allowed - Core methods
wizard.use(myPlugin).on('build', handler).parse();

// ❌ Not available - Internal methods
// wizard.register(command);     // Type error
// wizard.flag('debug', {});     // Type error
// wizard.interceptor(handler);  // Type error
```

### WizardWithUse Type Definition

<TSDoc
  definition={generateDefinition({
    code: `
export { WizardWithUse as default } from '@hyperse/wizard'`,
  })}
/>

### Internal Wizard Class

The full `Wizard` class contains additional internal methods that are not exposed to external users. This design ensures:

- **Clean Public API**: Only essential methods are exposed
- **Plugin Safety**: Plugins can't accidentally call internal methods
- **Maintainability**: Internal implementation can change without breaking external code

<TSDoc
  definition={generateDefinition({
    code: `
        import { Wizard } from '@hyperse/wizard'
        type PublicMembers<T> = Pick<T, {
        [K in keyof T]: K extends string ? K : never
        }[K]>;
        type myTye=PublicMembers<Wizard>
        export default myTye;
        `,
  })}
/>
